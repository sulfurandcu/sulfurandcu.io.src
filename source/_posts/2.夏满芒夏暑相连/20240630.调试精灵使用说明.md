---
title: 调试精灵使用说明
id: cly6m4gfj002qscrq77a5a7cn
date: 2024-06-30 09:51:48
tags:
categories:
---

<center><a href="https://code.visualstudio.com/Download">「这是一个内置 DLT645 规则解析引擎的协议测试工具」</a></center>

<br>

![](toolkit.dlt645.png)

<!--more-->

## 配置规则

按照数据类型可分为：

- time
- bcd
- hex
- bit
- str
- block

### time

数据格式为 YY、MM、DD、WW、hh、mm、ss 的自由组合。

```
        {
            "id": "0400010C",
            "name": "《三号备案》日期时间",
            "type": "time",
            "data": "YYMMDDWWhhmmss"
        },
```

### bcd

第一种：

```
        {
            "id": "02010100",
            "name": "《标准协议》当前电压（Ａ相）（XXX.X）",
            "type": "bcd",
            "data": "XXX.X",
            "unit": "V"
        },
```

第二种（数据块）：

```
        {
            "id": "0201FF00",
            "name": "《标准协议》当前电压（整块）（XXX.X）　",
            "type": "bcd",
            "data": [
                "XXX.X",
                "XXX.X",
                "XXX.X"
            ],
            "unit": "V"
        },
```

> 如果数据块中的数据单位不一样，则建议使用 block 类型。

### hex

需要显示原数据的要使用 hex 类型：

```
        {
            "id": "04000401",
            "name": "《标准协议》通信地址",
            "type": "hex",
            "data": "XXXXXXXXXXXX"
        },
```

一些没有数据域的控制指令也可以使用 hex 类型：

```
        {
            "id": "F4000000",
            "name": "《扩展协议》设备重启",
            "type": "hex",
            "data": ""
        },
```

### bit

位解析配置如下：

- lsb：表示该位段的最低位
- msb：表示该位段的最高位
- XX.：表示该位段的枚举值（00 ~ FF）

```
        {
            "id": "04000601",
            "name": "《标准协议》有功组合方式特征字",
            "type": "bit",
            "data": "XX",
            "bits": [
                {
                    "name": "正向有功",
                    "lsb": 0,
                    "msb": 1,
                    "00": "不加不减",
                    "01": "加",
                    "02": "减",
                    "03": "又加又减"
                },
                {
                    "name": "反向有功",
                    "lsb": 2,
                    "msb": 3,
                    "00": "不加不减",
                    "01": "加",
                    "02": "减",
                    "03": "又加又减"
                }
            ]
        },
```

支持多字节的位解析：

```
        {
            "id": "04001104",
            "name": "《三号备案》主动上报模式字",
            "type": "bit",
            "data": "XXXXXXXXXXXXXXXX",
            "bits": [
                {
                    "name": "bit-14: 分闸",
                    "lsb": 14,
                    "msb": 14,
                    "00": "",
                    "01": "✔"
                },
                {
                    "name": "bit-15: 合闸",
                    "lsb": 15,
                    "msb": 15,
                    "00": "",
                    "01": "✔"
                },
                {
                    "name": "bit-16: 失压",
                    "lsb": 16,
                    "msb": 16,
                    "00": "",
                    "01": "✔"
                },
                {
                    "name": "bit-17: 欠压",
                    "lsb": 17,
                    "msb": 17,
                    "00": "",
                    "01": "✔"
                },
                {
                    "name": "bit-18: 过压",
                    "lsb": 18,
                    "msb": 18,
                    "00": "",
                    "01": "✔"
                },
                {
                    "name": "bit-20: 过流",
                    "lsb": 20,
                    "msb": 20,
                    "00": "",
                    "01": "✔"
                },
                {
                    "name": "bit-21: 过载",
                    "lsb": 21,
                    "msb": 21,
                    "00": "",
                    "01": "✔"
                },
                {
                    "name": "bit-23: 断相",
                    "lsb": 23,
                    "msb": 23,
                    "00": "",
                    "01": "✔"
                }
            ]
        },
```

### str

目前「fillin」「fillat」「endian」暂不支持。

```
        {
            "id": "04000403",
            "name": "《标准协议》资产编码（ASCII）",
            "type": "str",
            "len": 32,
            "fillin": 0,
            "fillat": "front",
            "endian": "LE"
        },
```

### block

block 类型中可以放置上述任意类型，支持在 block 中嵌套 block 类型。

```
        {
            "id": "040013FF",
            "name": "《扩展协议》电压整定参数块",
            "type": "block",
            "data": [
                {
                    "name": "过压整定值",
                    "type": "bcd",
                    "data": "XXX.X",
                    "unit": "V"
                },
                {
                    "name": "欠压整定值",
                    "type": "bcd",
                    "data": "XXX.X",
                    "unit": "V"
                },
                {
                    "name": "断相整定值",
                    "type": "bcd",
                    "data": "XXX.X",
                    "unit": "V"
                }
            ]
        },
```

```
        {
            "id": "06010101",
            "name": "《扩展协议》预约远程跳闸控制",
            "type": "block",
            "data": [
                {
                    "name": "时间",
                    "type": "bcd",
                    "data": "XX"
                },
                {
                    "name": "单位",
                    "type": "bit",
                    "data": "XX",
                    "bits":[
                        {
                            "name":"单位",
                            "lsb": 0,
                            "msb": 7,
                            "01": "秒",
                            "02": "分",
                            "03": "时"
                        }
                    ]
                }
            ]
        },
```
