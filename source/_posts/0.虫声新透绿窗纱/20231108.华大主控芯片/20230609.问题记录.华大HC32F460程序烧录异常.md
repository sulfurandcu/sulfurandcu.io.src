---
title: 问题记录：华大 HC32F460 程序烧录异常
id: cloqsamml003qg4rqax6x02nz
date: 2023-06-09
tags: [华大半导体, HC32F460]
categories: [问题记录]
---

最近给 HC32F460 烧程序时，出现了烧录失败的现象。

操作流程：

- 在引导程序的 icg.h 文件中配置开启 SWDT 看门狗
- 烧录引导程序
- 烧录应用程序
- 读取整个芯片的镜像
- 把读取出来的镜像再烧回去

诡异的是，最后一步总是失败。

后面又进行了详细的测试：

| 测试记录 | 编程算法 |           SWDT           |                                                   烧录结果                                                   |
| :------: | :------: | :----------------------: | :----------------------------------------------------------------------------------------------------------: |
|    1     |   旧版   | 关闭<br>或者延长狗叫时间 |                                                   烧录成功                                                   |
|    2     |   旧版   |           开启           | 在烧录回去之前，做一次整片擦除，但是不断电：烧录失败<br>在烧录回去之前，做一次整片擦除，断电再上电：烧录成功 |
|    3     |   新版   |            X             |                                                 均可烧录成功                                                 |

猜测应该是编程算法在烧录过程中没有屏蔽 SWDT 所致，更换新版编程算法即可解决。
