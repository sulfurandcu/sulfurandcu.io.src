---
title: 網頁字體使用指南
id: webfont
date: 2022-03-05 00:00:00
updated:
tags:
categories: [個人博客]
---

在被 fontmin 和 font-spider 這倆貨虐得體無完膚之後，我決定試試[這篇文章](https://hsingko.github.io/post/compress_webfont/)中提到的另一個字體壓縮工具

**<center>“[fonttools](https://github.com/fonttools/fonttools)”</center>**

<!--more-->

### 網頁使用中文字體的方案？

0. 使用安全字體
1. 使用壓縮字體
2. 谷歌字體接口（google fonts api）

大多數網站的中文字體使用的都是安全字體，也就是機器中原生攜帶的字體，這樣的好處是無需通過網絡傳輸字體文件，也就不存在加載過慢的問題。安全字體好用是好用，但是架不住它丑啊，否則我也不會捯飭字體壓縮了不是！

使用谷歌的服務就意味着要拒絕來自不懂得科學上網的讀者的訪問，這是我所不能接受的。

所以，唯一的選擇就是“字體壓縮”！

### 爲什麼要對字體進行壓縮？

這裏的字體指的是漢字（泛中日韓）字體，拉丁字符或者西里爾字符這種字符數量較少的字體的體積通常比較小，沒有壓縮的必要。漢字字體通常收錄幾千上萬個字符，大小能達到幾十兆字節，而常用的漢字不過兩三千，聚焦至單篇文章中可能連一千都不到。倘若每次加載網頁時都要將完整的字體文件下載下來，其加載時間是往往是難以忍受的，這樣我們就要想法子縮減字體文件的體積。巧的是，字體壓縮就是幹這個的。

字體壓縮這麼“中藥”，社區應該非常活躍纔是啊，爲啥像 fontmin 和 font-spider 之類的工具基本都不怎麼維護了呢？

這裏的重要是有前提的，在無利可圖的情況下，沒有人或資本會給自己找不痛快，像我這種閒得蛋疼的除外。所以，知道前提是啥了不？😏

### 使用 fonttools 進行靜態壓縮！

```
pyftsubset font.ttf --text=$(cat hanzi.txt) --no-hinting
```

靜態壓縮的問題在於，無法保證文章中不會用到常用字表以外的字。

### 使用 fonttools 進行動態壓縮！

```
pyftsubset ../font/SourceHanSerifSC-Regular.otf --text=$(rg -e '[\u{0100}-\u{10ffff}]' -oN --no-filename|sort|uniq|tr -d '\n') --no-hinting
```

動態壓縮的問題在於，每次更新文章後都要執行一次字體壓縮流程。

因此流程自動化迫在眉睫！

```
由於本人太忙（懶），自動化腳本隨緣更新！
```
