---
title: LilyPond
id: clnyhr2mr003410rq5kcs69uj
date: 2023-06-10 10:43:05
tags: [五線譜, 簡譜, lilypond]
categories: [學點音樂]
---

LilyPond 是什麼？(**https://lilypond.org/**)

> LilyPond (荷花池) 是一個音樂雕版軟件，致力產生最高質量的樂譜。它把傳統音樂雕版印刷的美學，呈現在計算機打印的樂譜上。LilyPond 是自由軟件，也是 GNU Project 的一部分。

計算機軟件的內核是將接收到的數據進行計算並輸出，LilyPond 也不例外。我們需要按照 LilyPond 開發者制定的規則編寫樂譜源碼，然後使用 LilyPond 程序將源代碼轉換爲 PNG、PDF、SVG、MIDI 等格式的文件。

**荷花池（線譜）的運作流程如下：**

1. 按照 lilypond 開發者制定的規則編寫「LilyPond 樂譜源碼」。
2. 使用 lilypond 程序將「LilyPond 樂譜源碼」轉換爲我們期望的「樂譜」文件。

{% note info no-icon %}
這裏的 lilypond.exe 程序與我們日常使用的軟件有所不同，需要通過命令行的方式來調用執行。
{% endnote %}

不過 LilyPond 主要用於生成五線譜，若想生成簡譜我們還需要藉助另外一個工具：

![圖片加載失敗](jianpuly.png)

與上面不同，我們不再按照 LilyPond 的規則編寫「LilyPond 樂譜源碼」而是按照 jianpuly 開發者制定的規則編寫「Jianpuly 簡譜源碼」。

**荷花池（簡譜）的運作流程如下：**

1. 按照 jianpuly 開發者制定的規則編寫「Jianpuly 簡譜源碼」。
2. 使用 jianpuly 腳本將「Jianpuly 簡譜源碼」轉換爲「LilyPond 樂譜源碼」。
3. 使用 lilypond 程序將「LilyPond 樂譜源碼」轉換爲我們期望的「樂譜」文件。

{% note info no-icon %}
與 lilypond 類似，jianpu-ly.py 需要通過命令行的方式經 python 調用執行。
{% endnote %}

<!-- more -->

## 軟件下載

**1. 下載 lilypond 壓縮包**

![圖片加載失敗](lilypond-download.png)

<center><a href="https://lilypond.org/download.html">下載鏈接</a></center><br>

**2. 下載 jianpu-ly.py 腳本文件**

![圖片加載失敗](jianpuly-download.png)

<center><a href="http://ssb22.user.srcf.net/mwrhome/jianpu-ly.html">下載鏈接</a></center><br>

## 軟件安裝

**1. 將下載好的 lilypond 壓縮包解壓至任意位置**

**2. 將下載好的 jianpu-ly.py 剪切至 lilypond 解壓目錄下的 bin 文件夾中**

![圖片加載失敗](lilypond-install-unpack.png)

**3. 將 lilypond 安裝目錄下的 bin 文件夾添加至系統環境變量 PATH 中**

**第一步：搜索「環境變量」然後點擊「編輯系統環境變量」**

![圖片加載失敗](lilypond-install-systempath1.png)

**第二步：點擊「環境變量」按鈕**

![圖片加載失敗](lilypond-install-systempath2.png)

**第三步：選中系統變量中的「PATH」然後點擊下方的「編輯」按鈕**

![圖片加載失敗](lilypond-install-systempath3.png)

**第四步：點擊「新建」按鈕然後輸入之前解壓的 lilypond 的完整路徑**

![圖片加載失敗](lilypond-install-systempath4.png)

**4. 驗證 lilypond 是否正常安裝**

**第一步：按下「Win+R」鍵打開運行對話框然後輸入 cmd 並運行**

![圖片加載失敗](lilypond-install-verify-cmd.png)

**第二步：輸入「lilypond --help」然後按下回車鍵**

![圖片加載失敗](lilypond-help.png)

如果你能看到上圖中的信息，那麼恭喜，安裝完成！下面可以嘗試製作一個簡單的樂譜了！

<br>

## 線譜製作

寫到這裏時發現了一篇非常不錯的 lilypond 中文入門教程，既然如此，那我索性就偷個懶，各位看官請移步這裏：

<center><a href="https://www.yuque.com/qqbunny/lilypond">《LilyPond 入門教程》 by 兔子不咬人</a></center><br>

## 簡譜製作

**1. 新建一個文件夾作爲工作空間**

**2. 將 jianpu-ly.py 腳本文件拷貝至工作空間**

**3. 在工作空間中創建一個文本文檔（例如：簡譜代碼.txt）然後寫入以下內容**

```
%% tempo: 4=60
title=標題
1=C
2/4

1 2 3 4 5 6 7 1'
```

**4. 在工作空間中單擊右鍵選擇「在終端中打開」然後會彈出一個黑框框**

**5. 輸入以下命令並然後按回車鍵執行**

```
python jianpu-ly.py 簡譜代碼.txt > 樂譜代碼.ly
```

**6. 輸入以下命令並然後按回車鍵執行**

```
lilypond -o 樂譜文件 --format=pdf,png 樂譜代碼.ly
```

**7. 嫌麻煩的話也可以在工作空間中新建一個「自動腳本.bat」批處理文件並填入以下內容**

```
chcp 65001

set jianpuly="D:\develop.r.1\lilypond-2.24.1\bin\jianpu-ly.py"

set source="簡譜"
set output="曲譜"

set middle="荷花"

python %jianpuly% %source%.txt > %middle%.ly
lilypond -o %output% --format=pdf,png %middle%.ly
lilypond -o %output% --format=svg %middle%.ly

md %source%

move .\%output%.* .\%source%
move .\%middle%.* .\%source%
```

**8. 以後只要雙擊該腳本即可自動生成**

{% note info no-icon %}
使用這種方式時，文件名就不能隨便起了，必須與「source」字段保持一致。
{% endnote %}

## 簡譜規則

```
Scale going up                                              1 2 3 4 5 6 7 1'
Accidentals                                                 1 #1 2 b2 1
Octaves                                                     1,, 1, 1 1' 1''
Shortcuts for 1’ and 2’                                     8 9
Semiquaver, quaver, crotchet (16/8/4th notes)               s1 q1 1
Dotted versions of the above (50% longer)                   s1. q1. 1.
Demisemiquaver, hemidemisemiquaver (32/64th notes)          d1 h1
Minims (half notes) use dashes                              1 -
Dotted minim                                                1 - -
Semibreve (whole note)                                      1 - - -
Time signature                                              4/4
Time signature with quaver anacrusis (8th-note pickup)      4/4,8
Key signature (major)                                       1=Bb
Key signature (minor)                                       6=F#
Tempo                                                       4=85
Lyrics                                                      L: here are the syl- la- bles (all on one line)
Lyrics (verse 1)                                            L: 1. Here is verse one
Lyrics (verse 2)                                            L: 2. Here is verse two
Hanzi lyrics (auto space)                                   H: hanzi (with or without spaces)
Lilypond headers                                            title=the title (on a line of its own)
Multiple parts                                              NextPart
Instrument of current part                                  instrument=Flute (on a line of its own)
Multiple movements                                          NextScore
Prohibit page breaks until end of this movement             OnePage
Suppress bar numbers                                        NoBarNums
Old-style time signature                                    SeparateTimesig 1=C 4/4
Indonesian ‘not angka’ style                                angka
Add a Western staff doubling the tune                       WithStaff
Tuplets                                                     3[ q1 q1 q1 ]
Grace notes before                                          g[#45] 1
Grace notes after                                           1 ['1]g
Simple chords                                               135 1 13 1
Da capo                                                     1 1 Fine 1 1 1 1 1 1 DC
Repeat (with alternate endings)                             R{ 1 1 1 } A{ 2 | 3 }
Short repeats (percent)                                     R4{ 1 2 }
Ties (like Lilypond’s, if you don’t want dashes)            1 ~ 1
Slurs (like Lilypond’s)                                     1 ( 2 )
Erhu fingering (applies to previous note)                   Fr=0 Fr=4
Erhu symbol (applies to previous note)                      souyin harmonic up down bend tilde
Tremolo                                                     1/// - 1///5 -
Rehearsal letters                                           letterA letterB
Multibar rest                                               R*8
Dynamics (applies to previous note)                         \p \mp \f
Other 1-word Lilypond \ commands                            \fermata \> \! \( \) etc
Text                                                        ^"above note" _"below note"
Other Lilypond code                                         LP: (block of code) :LP (each delimeter at start of its line)
Ignored                                                     % a comment
```
