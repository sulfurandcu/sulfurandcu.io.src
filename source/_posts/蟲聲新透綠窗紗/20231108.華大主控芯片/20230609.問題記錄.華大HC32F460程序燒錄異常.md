---
title: 問題記錄：華大 HC32F460 程序燒錄異常
id: cloqsamml003qg4rqax6x02nz
date: 2023-06-09
tags: [華大半導體, HC32F460]
categories: [問題記錄]
---

最近給 HC32F460 燒程序時，出現了燒錄失敗的現象。

操作流程：

- 在引導程序的 icg.h 文件中配置開啓 SWDT 看門狗
- 燒錄引導程序
- 燒錄應用程序
- 讀取整個芯片的鏡像
- 把讀取出來的鏡像再燒回去

詭異的是，最後一步總是失敗。

後面又進行了詳細的測試：

| 測試記錄 | 編程算法 |           SWDT           |                                                   燒錄結果                                                   |
| :------: | :------: | :----------------------: | :----------------------------------------------------------------------------------------------------------: |
|    1     |   舊版   | 關閉<br>或者延長狗叫時間 |                                                   燒錄成功                                                   |
|    2     |   舊版   |           開啓           | 在燒錄回去之前，做一次整片擦除，但是不斷電：燒錄失敗<br>在燒錄回去之前，做一次整片擦除，斷電再上電：燒錄成功 |
|    3     |   新版   |            X             |                                                 均可燒錄成功                                                 |

猜測應該是編程算法在燒錄過程中沒有屏蔽 SWDT 所致，更換新版編程算法即可解決。
